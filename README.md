# Filmix â€” Gerenciador de Filmes e SÃ©ries ðŸŽ¬

## 1) Problema
Muitas pessoas assistem filmes e sÃ©ries, mas acabam esquecendo quais jÃ¡ viram, quais ainda querem assistir e qual nota dariam para cada obra.  
Isso gera desorganizaÃ§Ã£o, repetiÃ§Ãµes indesejadas e dificuldade em recomendar conteÃºdos para amigos.  
O foco inicial Ã© no **usuÃ¡rio individual**, com o objetivo de permitir que ele registre, organize e atribua notas (0 a 10) Ã s produÃ§Ãµes assistidas.

## 2) Atores e Decisores (quem usa / quem decide)
**UsuÃ¡rios principais:** Pessoas que desejam organizar seus filmes e sÃ©ries assistidos.  
**Decisores/Apoiadores:** Administradores; equipe de desenvolvimento

## 3) Casos de uso (de forma simples)
Todos: Logar/deslogar do sistema; Manter dados cadastrais.  
UsuÃ¡rio:
- Manter (inserir, mostrar, editar, remover) filmes/sÃ©ries.
- Marcar filmes/sÃ©ries como vistos ou nÃ£o vistos.
- Atribuir nota de 0 a 10 para cada filme/sÃ©rie.
- Filtrar lista por status (vistos / nÃ£o vistos).

## 4) Limites e suposiÃ§Ãµes
**Limites:** prazo final da disciplina; rodar no navegador; sem serviÃ§os pagos.  
**SuposiÃ§Ãµes:** acesso Ã  internet, navegador atualizado, GitHub para deploy, tempo do professor para avaliaÃ§Ã£o.  
**Plano B:** se nÃ£o houver internet â†’ rodar local com banco H2 no Spring Boot; se nÃ£o houver tempo do professor â†’ testar com colegas.

## 5) HipÃ³teses + validaÃ§Ã£o
**H-Valor:** Se o usuÃ¡rio puder registrar e avaliar seus filmes, entÃ£o terÃ¡ mais controle sobre seu histÃ³rico de entretenimento, melhorando sua organizaÃ§Ã£o.  
**ValidaÃ§Ã£o (valor):** teste com 5 usuÃ¡rios; sucesso se â‰¥4 conseguirem cadastrar, marcar como visto e avaliar sem ajuda.

**H-Viabilidade:** Com Angular + Spring Boot + SQLite/Postgres, cadastrar e listar filmes responde em atÃ© 1 segundo.  
**ValidaÃ§Ã£o (viabilidade):** medir no protÃ³tipo com 30 aÃ§Ãµes; meta: pelo menos 27 de 30 aÃ§Ãµes em â‰¤1s.

## 6) Fluxo principal e primeira fatia
**Fluxo principal (curto):**
1) UsuÃ¡rio faz login
2) Adiciona filme/sÃ©rie
3) Sistema salva no banco (Spring Boot + DB)
4) Angular exibe o filme na lista com status e nota

**Primeira fatia vertical (escopo mÃ­nimo):**  
Inclui: login simples, cadastrar filme, listar filmes em ordem, marcar como visto.  
**CritÃ©rios de aceite:**
- Criar filme â†’ aparece na lista com status e nota.
- Marcar como visto â†’ muda o status para âœ” Visto.

## 7) EsboÃ§os de algumas telas (wireframes)
### Tela de Login
![Wireframe - Login](Wireframes/1.png)

### Tela de Cadastro
![Wireframe - Cadastro](Wireframes/2.png)

### Tela de Lista de Filmes
![Wireframe - Lista de Filmes](Wireframes/3.png)

### Tela de Adicionar/Editar Filme
![Wireframe - Adicionar Filme](Wireframes/4.png)

## 8) Tecnologias
### 8.1 Navegador
**Navegador:** Chrome/Firefox/Edge (compatÃ­vel com Angular)  
**Hospedagem Front-end:** GitHub Pages ou Vercel

### 8.2 Front-end (Angular)
**Framework:** Angular  
**EstilizaÃ§Ã£o:** Angular Material / Bootstrap  
**ComunicaÃ§Ã£o com API:** HTTPClient (REST API)  
**Hospedagem:** Vercel / Netlify

### 8.3 Back-end (API com Spring Boot)
**Framework:** Spring Boot (Java 17+)  
**Banco de dados:** PostgreSQL (executado via Docker)  
**SeguranÃ§a:** Spring Security + JWT (autenticaÃ§Ã£o)
**Gerenciador de DependÃªncias:** Maven

## 9) Plano de Dados (Dia 0) â€” somente itens 1â€“3
### 9.1 Entidades
- Usuarios â€” Pessoa que usa o sistema, pode se cadastrar, fazer login, ter uma lista pessoal de filmes e fazer avaliaÃ§Ãµes.
- Filmes â€” Filme cadastrado no sistema. ContÃ©m informaÃ§Ãµes como tÃ­tulo, sinopse, diretor e pode ser associada a gÃªneros e avaliaÃ§Ãµes.
- Generos â€” Categoria utilizada para classificar os filmes (ex: AÃ§Ã£o, ComÃ©dia, Drama), ajudando na organizaÃ§Ã£o e busca dentro do catÃ¡logo.
- Avaliacoes â€” OpiniÃ£o de um usuÃ¡rio sobre um filme, consistindo em uma nota e um comentÃ¡rio. Cada avaliaÃ§Ã£o estÃ¡ ligada a um usuÃ¡rio e a um filme especÃ­fico.

### 9.2 Campos por entidade

#### Entidade: `usuarios`

| Campo | Tipo | ObrigatÃ³rio? | Exemplo |
| :--- | :--- | :--- | :--- |
| id | SERIAL | Sim | 1 |
| nome | texto | Sim | "Jordan Ebertz" |
| email | texto | Sim (Ãºnico) | "rosana.ebertz@gmail.com" |
| senha_hash | texto | Sim | "$2a$10$..." |
| foto_perfil | texto | NÃ£o | "https://ogimg.infoglobo.com.br/in/20456620-302-c5b/FT1086A/760/Ibere.jpg" |

#### Entidade: `generos`

| Campo | Tipo | ObrigatÃ³rio? | Exemplo |
| :--- | :--- | :--- | :--- |
| id | SERIAL | Sim | 1 |
| nome | texto | Sim (Ãºnico) | "FicÃ§Ã£o CientÃ­fica" |

#### Entidade: `filmes`

| Campo | Tipo | ObrigatÃ³rio? | Exemplo |
| :--- | :--- | :--- | :--- |
| id | SERIAL | Sim | 1 |
| titulo | texto | Sim (Ãºnico) | "Interestelar" |
| sinopse | texto | NÃ£o | "As reservas da Terra estÃ£o..." |
| diretor | texto | NÃ£o | "Christopher Nolan" |
| ano_lancamento | data | NÃ£o | "2014-11-06" |
| foto_filme | texto | NÃ£o | "https://link.com/poster.png"|

#### Entidade: `avaliacoes`

| Campo | Tipo | ObrigatÃ³rio? | Exemplo |
| :--- | :--- | :--- | :--- |
| id | SERIAL | Sim | 1 |
| usuario_id | nÃºmero (fk) | Sim | 1 |
| filme_id | nÃºmero (fk) | Sim | 1 |
| nota | nÃºmero | Sim | 9.8 |
| comentario | texto | NÃ£o | "Filme espetacular!" |
| data_avaliacao | data/hora | Sim | "2025-09-10 21:30:00" |

#### Entidade: `filme_genero` (Tabela de JunÃ§Ã£o)

| Campo | Tipo | ObrigatÃ³rio? | Exemplo |
| :--- | :--- | :--- | :--- |
| filme_id | nÃºmero (fk) | Sim | 1 |
| genero_id | nÃºmero (fk) | Sim | 1 |

#### Entidade: `usuario_lista_filmes` (Tabela de JunÃ§Ã£o)

| Campo | Tipo | ObrigatÃ³rio? | Exemplo |
| :--- | :--- | :--- | :--- |
| usuario_id | nÃºmero (fk) | Sim | 1 |
| filme_id | nÃºmero (fk) | Sim | 1 |

### 9.3 RelaÃ§Ãµes entre entidades

-   Um **Usuario** pode ter muitas **Avaliacoes** (1â†’N).
-   Uma **Avaliacao** pertence a um **Usuario** (Nâ†’1).
-   Um **Filme** pode ter muitas **Avaliacoes** (1â†’N).
-   Uma **Avaliacao** Ã© sobre um **Filme** (Nâ†’1).
-   Um **Filme** pode ter muitos **Generos** (Nâ†”N, resolvido pela tabela `filme_genero`).
-   Um **Usuario** pode ter muitos **Filmes** em sua lista pessoal (Nâ†”N, resolvido pela tabela `usuario_lista_filmes`).

### 9.4 Modelagem no PostgreSQL

*A aplicaÃ§Ã£o estÃ¡ configurada com `spring.jpa.hibernate.ddl-auto=update`. O script DDL abaixo serve como documentaÃ§Ã£o da estrutura que Ã© gerada automaticamente pela aplicaÃ§Ã£o ao ser iniciada.*


```sql
-- -> DDL (Data Definition Language)

-- ======================
-- Tabela: usuarios
-- ======================
CREATE TABLE IF NOT EXISTS usuarios (
    id                SERIAL PRIMARY KEY,
    nome              VARCHAR(100) NOT NULL,
    email             VARCHAR(200) NOT NULL UNIQUE,
    senha_hash        VARCHAR(255) NOT NULL,
    foto_perfil       VARCHAR(255)
);

-- ======================
-- Tabela: generos
-- ======================
CREATE TABLE IF NOT EXISTS generos (
    id     SERIAL PRIMARY KEY,
    nome   VARCHAR(50) NOT NULL UNIQUE
);

-- ======================
-- Tabela: filmes
-- ======================
CREATE TABLE IF NOT EXISTS filmes (
    id             SERIAL PRIMARY KEY,
    titulo         VARCHAR(255) NOT NULL UNIQUE,
    sinopse        VARCHAR(255),
    diretor        VARCHAR(100),
    ano_lancamento DATE,
    foto_filme     VARCHAR(255)
);

-- ======================
-- Tabela: avaliacoes
-- ======================
CREATE TABLE IF NOT EXISTS avaliacoes (
    id             SERIAL PRIMARY KEY,
    usuario_id     INTEGER NOT NULL REFERENCES usuarios(id) ON DELETE CASCADE,
    filme_id       INTEGER NOT NULL REFERENCES filmes(id) ON DELETE CASCADE,
    nota           NUMERIC(3,1) NOT NULL CHECK (nota >= 0.0 AND nota <= 10.0),
    comentario     VARCHAR(255),
    data_avaliacao TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP
);

-- ======================
-- Tabela: filme_genero (JunÃ§Ã£o N-N)
-- ======================
CREATE TABLE IF NOT EXISTS filme_genero (
    filme_id  INTEGER NOT NULL REFERENCES filmes(id) ON DELETE CASCADE,
    genero_id INTEGER NOT NULL REFERENCES generos(id) ON DELETE CASCADE,
    PRIMARY KEY (filme_id, genero_id)
);

-- ======================
-- Tabela: usuario_lista_filmes (JunÃ§Ã£o N-N)
-- ======================
CREATE TABLE IF NOT EXISTS usuario_lista_filmes (
    usuario_id INTEGER NOT NULL REFERENCES usuarios(id) ON DELETE CASCADE,
    filme_id   INTEGER NOT NULL REFERENCES filmes(id) ON DELETE CASCADE,
    PRIMARY KEY (usuario_id, filme_id)
);


-- -> DML (Data Manipulation Language) - InserÃ§Ãµes de Teste

-- Inserindo usuÃ¡rios
INSERT INTO usuarios (nome, email, senha_hash) VALUES
('Jordan Ebertz', 'rosana.ebertz@gmmail.com', '$2a$10$abcdef...'),
('Bruno Costa', 'bruno.costa@email.com', '$2a$10$ghijkl...');

-- Inserindo gÃªneros
INSERT INTO generos (nome) VALUES ('FicÃ§Ã£o CientÃ­fica'), ('AÃ§Ã£o'), ('Drama');

-- Inserindo filmes
INSERT INTO filmes (titulo, diretor, ano_lancamento) VALUES
('Interestelar', 'Christopher Nolan', '2014-11-06'),
('O Poderoso ChefÃ£o', 'Francis Ford Coppola', '1972-09-08');

-- Associando filmes com gÃªneros
INSERT INTO filme_genero (filme_id, genero_id) VALUES
(1, 1), -- Interestelar -> FicÃ§Ã£o CientÃ­fica
(1, 3), -- Interestelar -> Drama
(2, 3); -- O Poderoso ChefÃ£o -> Drama

-- Inserindo avaliaÃ§Ãµes
INSERT INTO avaliacoes (usuario_id, filme_id, nota, comentario) VALUES
(1, 1, 9.8, 'Visualmente incrÃ­vel e com uma histÃ³ria emocionante.'),
(2, 2, 10.0, 'Obra-prima do cinema.');

-- Adicionando filmes Ã  lista de usuÃ¡rios
INSERT INTO usuario_lista_filmes (usuario_id, filme_id) VALUES
(1, 1), -- Jordan adicionou Interestelar Ã  sua lista
(1, 2), -- Jordan adicionou O Poderoso ChefÃ£o Ã  sua lista
(2, 1); -- Bruno adicionou Interestelar Ã  sua lista


-- -> DQL (Data Query Language) - Consultas de Teste

-- 1. Retorna todos os filmes e seus diretores.
SELECT titulo, diretor FROM filmes;

-- 2. Retorna os gÃªneros do filme com id = 1 ('Interestelar').
SELECT g.nome
FROM generos g
JOIN filme_genero fg ON g.id = fg.genero_id
WHERE fg.filme_id = 1;

-- 3. Retorna todas as avaliaÃ§Ãµes com o nome do usuÃ¡rio e o tÃ­tulo do filme.
SELECT u.nome AS usuario, f.titulo AS filme, a.nota, a.comentario
FROM avaliacoes a
JOIN usuarios u ON a.usuario_id = u.id
JOIN filmes f ON a.filme_id = f.id;

-- 4. Retorna a nota mÃ©dia do filme com id = 1 ('Interestelar').
SELECT AVG(nota) AS nota_media_interestelar
FROM avaliacoes
WHERE filme_id = 1;

-- 5. Retorna os filmes na lista pessoal da usuÃ¡ria 'Jordan Ebertz'.
SELECT f.titulo
FROM filmes f
JOIN usuario_lista_filmes ulf ON f.id = ulf.filme_id
JOIN usuarios u ON u.id = ulf.usuario_id
WHERE u.nome = 'Jordan Ebertz';
SELECT AVG(a.nota) AS nota_media FROM avaliacoes a JOIN filmes f ON a.filme_id = f.id WHERE f.titulo = 'Interestelar';

-- 5. Mostra os filmes na lista da usuÃ¡ria 'Jordan Ebertz'.
SELECT f.titulo FROM filmes f JOIN usuario_lista_filmes ulf ON f.id = ulf.filme_id JOIN usuarios u ON u.id = ulf.usuario_id WHERE u.nome = 'Jordan Ebertz';